using System;
using System.IO;
using System.Text;

class Program 
{
    static string filePath = "secret.txt";
    static byte xorKey = 143;

    static void Main(string[] args)
    {
        if (!File.Exists(filePath))
        {
            Console.WriteLine("Save not found. Creating encrypted save file...");
            string defaultData = "Welcome to your encrypted adventure!";
            string encrypted = EncryptDecrypt(defaultData);
            File.WriteAllText(filePath, defaultData);
        }

        try
        {
            string rawContent = File.ReadAllText(filePath);
            string decrypted = EncryptDecrypt(rawContent);
            Console.WriteLine("Secret File Loaded: ");
            Console.WriteLine(decrypted);
        }
        catch (Exception ex) 
        {
            Console.WriteLine($"Error reading or decrypting file: {ex.Message}");
        }
    }

    static string EncryptDecrypt(string input)
    {
        StringBuilder output = new StringBuilder();

        foreach (char c in input)
        {
            char encryptedChar = (char)(c ^ xorKey);
            output.Append(encryptedChar);
        }

        return output.ToString();
    }
}
